{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/filters/index.ts"],"names":[],"mappings":";;;AAGA,MAAa,WAAW;IAAxB;QACI,WAAM,GAAG,IAAI,OAAO,EAAc,CAAC;QACnC,qBAAgB,GAAG,IAAI,OAAO,EAA2B,CAAC;IAiB9D,CAAC;IAhBG,yDAAyD;IAEzD,QAAQ,CAAC,UAAsB;QAC3B,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;YAC9B,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;YAC5B,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,UAAU,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;SACpD;IACL,CAAC;IAED,MAAM,CAAC,GAAG,CAAC,MAA2B;QAClC,IAAI,MAAM,CAAC,YAAY,KAAK,SAAS,EAAE;YACnC,MAAM,CAAC,YAAY,GAAG,IAAI,WAAW,EAAE,CAAC;SAC3C;QAED,OAAO,MAAM,CAAC,YAA2B,CAAC;IAC9C,CAAC;CACJ;AAnBD,kCAmBC","sourcesContent":["import { ChangeTree } from \"../changes/ChangeTree\";\nimport { ClientWithSessionId } from \"../annotations\";\n\nexport class ClientState {\n    refIds = new WeakSet<ChangeTree>();\n    containerIndexes = new WeakMap<ChangeTree, Set<number>>();\n    // containerIndexes = new Map<ChangeTree, Set<number>>();\n\n    addRefId(changeTree: ChangeTree) {\n        if (!this.refIds.has(changeTree)) {\n            this.refIds.add(changeTree);\n            this.containerIndexes.set(changeTree, new Set());\n        }\n    }\n\n    static get(client: ClientWithSessionId) {\n        if (client.$filterState === undefined) {\n            client.$filterState = new ClientState();\n        }\n\n        return client.$filterState as ClientState;\n    }\n}\n"]}